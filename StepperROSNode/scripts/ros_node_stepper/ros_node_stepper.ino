//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include <Stepper.h>
#include <ros.h>
#include <std_msgs/UInt16.h>
#include <std_msgs/String.h>

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const float STEPS_PER_REV = 32; 

ros::NodeHandle  nh;

Stepper steppermotor(STEPS_PER_REV, 8, 10, 9, 11);

void stepper_cb( const std_msgs::UInt16& cmd_msg){
  steppermotor.setSpeed(cmd_msg.data);
  steppermotor.step(1);
}

ros::Subscriber<std_msgs::UInt16> sub("stepper", &stepper_cb);

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void setup()
{
  nh.initNode();
  nh.subscribe(sub);
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void loop()
{  
  nh.spinOnce();
  delay(1);
}
